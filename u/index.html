<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        body  {
            background-image: url("img.png");
            background-repeat: no-repeat;
            background-size: cover;
        }
    </style>
    <meta charset="UTF-8">
    <title>Chative Invitation</title>
</head>
<body>
<a id="download" href="https://apps.apple.com/hk/app/chative/id6443719300?l=en" target="_blank" style="position: fixed;top:570px;left:30px;width: 380px;height: 180px;/*border: 3px solid #73AD21;*/"></a>
<a id="launchapp" target="_blank" style="position: fixed;top:870px;left:30px;width: 900px;height: 250px;/*border: 3px solid #73AD21;*/"></a>
</body>
<script defer>
    function isWechat() {
        let ua = navigator.userAgent.toLowerCase(), flag = false;
        if(ua.indexOf("micromessenger") > -1){
            flag = true;
        }else {
            flag = false;
        }
        return flag;
    }

    function showWechatGuide() {
        try {
            if (document.getElementsByClassName("j-guide").length > 0) return;
            const e = document.createElement("div");
            e.className = "j-guide", e.style.position = "fixed", e.style.left = "0px", e.style.top = "0px", e.style.right = "0px", e.style.bottom = "0px", e.style.backgroundColor = "rgba(0, 0, 0, 0.8)", e.style.zIndex = "99";
            const t = new Image;
            t.src = "wechatmasktip.png", t.style.position = "absolute", t.style.width = "550px", t.style.top = "13px", t.style.right = "24px", e.appendChild(t), e.addEventListener("touchmove", (e => {
                e.stopPropagation(), e.preventDefault()
            })), e.addEventListener("click", (t => {
                t.stopPropagation(), t.preventDefault(), e && document.body.removeChild(e)
            })), document.body.appendChild(e)
        } catch (e) {
            console.error(e)
        }
    }

    // Compose the scheme URL.
    url = new URLSearchParams(window.location.search);
    i = url.get("i");
    appurl = "chative://invite/?a=i&i=" + i;
    document.getElementById("launchapp").href=appurl;

    // Call the app automatically.
    window.location.replace(appurl);

    // Guide the user to open this page with browsers if the container is Wechat.
    if (isWechat()) {
        showWechatGuide();
    }
</script>
</html>
