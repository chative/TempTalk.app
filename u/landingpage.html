<html>
<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>chative</title>
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+SC:100,300,400,500,700,900"> -->
    <script type="text/javascript" src="../js/qrcode.js"></script>
    <script src="../js/jquery.js" type="text/javascript"></script>
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <script src="../js/bootstrap.min.js" type="text/javascript"></script>
    <link href="css/landingpage.css" rel="stylesheet">
    
    <script type="module">
        
    </script>
</head>
<body>
<div class="heaher">
    <nav class="navbar navbar-default navbar-fixed-top" style="border: 0px;">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="index_m.html"><img class="mr-1" src="images/logos.png"/></a>
            </div>
        </div>
    </nav>
</div>
<div class="container-fluid" style="padding: 50px 15px;text-align: center;">
    <!-- 安卓ios class = user-content, mac,win class 为user-content_index -->
    <div class="user-content" style="">
        <img class="user_pic" src="images/user_pic.png">
        <!-- 有安装APP -->
        <div class="user_info" style="display: none;">
            <p id="user_name">John Tseng</p>
            <p id="user_add_friend">Add friend on Chative</p>
            <button class="btn send_message">Sent Message</button>
        </div>
        <!-- 没安装APP -->
        <div class="join_info" style="">
            <div class="join_content_top">
                <p class="join_title">Join first</p>
                <p class="join_content">It looks like you don’t have Chative on your phone. Please download first!</p>
            </div>
            <div class="join_content_buttom">
                <div class="join_content_cancel">Cancel</div>
                <div class="join_content_Download">Download</div>
            </div>
        </div>
    </div>   
    <!-- 网页 -->
    <div class="user-content_index" style="">
        <img class="user_pic" src="images/user_pic.png">
        <div class="user_info">
            <p class="user_name">John Tseng</p>
            <!-- <img id="qrcode" src="images/qrcode.png" style="width: 240px;height: 240px;"> -->
            <div id="qrcode" style="width: 240px;height: 240px;margin: 0px auto;">
                <img src="icon.svg" id="logo" style="display: none">
            </div>
            <p class="user_add_friend">Please Scan with your phone</p>
        </div>
    </div>  
</div>
<footer class="bs-docs-footer navbar-fixed-bottom" style="bottom: 0px;">
    <div class="container" style="text-align: center;">
       <a href="">Download App -></a>
    </div>
</footer>
<!-- <script src="../js/index_m.js" type="text/javascript"></script> -->
<!-- <script src="../js/common.js" type="module"></script> -->
<script type="text/javascript">
    //url : 
    $(function(){
        function isIosOrAndroid(){
            let ua = navigator.userAgent;
            if (/(Android)/i.test(ua)){
                return 'Android';
            }
            if (/(iPhone|iPad|ipod|iOS)/i.test(ua)){
                return 'Ios';
            }
        }
        function getQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]); return null;
        }

        var params = new URLSearchParams(window.location.search).toString();
        var pi = getQueryString("pi");
        if(!pi){
            alert("无邀请码！");
            return false;
        }


        //alert(getQueryString("pi"));
        if (isIosOrAndroid() === 'Ios'){
            $(".user-content").show();
            $(".user-content_index").hide();
            $(".bs-docs-footer").show();
            //window.location.href = 'index.html?' + params;
        } else if (isIosOrAndroid() === 'Android'){
            $(".user-content").show();
            $(".user-content_index").hide();
            $(".bs-docs-footer").show();
            //window.location.href = 'androidIndex.html?' + params;
        }else{
            $(".user-content").hide();
            $(".user-content_index").show();
            $(".bs-docs-footer").hide();
        }

        new QRCode(document.getElementById('qrcode'),{
            render:'canvas',
            text: "https://chative.com/u/index.html?" + params,
            correctLevel: QRCode.CorrectLevel.H,
            width:240,
            height:240,
            colorDark: '#000000',
            colorLight: '#ffffff',
        })
        $("#qrcode canvas")[0].getContext('2d').drawImage($("#logo")[0],90,90,60,60);
      

        //请求URL地址 https://www.test.chative.im/v3/web/userinfo?i='+pi
        //./json/user_info.json
        // $.ajax({
        //     type: "GET",
        //     dataType: 'json',
        //     url: "./json/user_info.json",
        //     data: "",
        //     success: function(msg){
        //         //$(".user_pic").src();
        //     },
        //     error : function(){
        //         alert("用户信息请求失败");
        //     }
        // });
    });
    
    

</script>
</body>
</html>